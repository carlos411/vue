# 2.2 export 和 import

## 範例 1：在宣告之前，加上 export，即可匯出

例：

```javascript
export let my_arr = [1, 2, 3]; // 陣列

export const MyData = 2022; // 常數

export function say_hi(){ // 函式
  alert("abc");
}
```



## 範例 2：將 export 與 宣告做分離

例：

```javascript
function hi(user) {
  return `Hi, ${user}!`;
}

function hello(user) {
  return `Hello, ${user}!`;
}

export {hi, hello}; // 匯出
```



## 範例 3：使用 import \* as

然後 **`module_test3.html`** 載入 **`say_hi.js`** 模組，可寫以下語法：

```html
<!DOCTYPE html>
<html lang="zh-Hant">
  <head>
    <meta charset="utf-8">
    <title></title>
  </head>
  <body>
    <script type="module">
      import * as say from "./modules/say_hi.js";

      console.log(say.hi("a"));
      console.log(say.hello("b"));
    </script>
  </body>
</html>
```



## 範例 4：import 中使用 as

例：

```html
<!DOCTYPE html>
<html lang="zh-Hant">
  <head>
    <meta charset="utf-8">
    <title></title>
  </head>
  <body>
    <script type="module">
      import {hi as hi2, bye as bye2} from "./modules/export_test.js";
      // 上面這行，主要是將匯出的名稱做改變，原來是 hi 函式，但改成 hi2

      // 可執行以下函式
      hi2("John");
      bye2("John");
    </script>
  </body>
</html>
```



## 範例 5：export 中使用 as

例如 `export_test.js` 內容如下：

```javascript
function hi(user){
  alert("哈囉: " + user);
}

function bye(user){
  alert("掰: " + user);
}

export {hi as hi2, bye as bye2}; // 將匯出的函式名稱做改變，hi 改成 hi2
```

然後 `module_test5.html` 載入上述的 `export_test.js` 模組，可寫以下語法：

```html
<!DOCTYPE html>
<html lang="zh-Hant">
  <head>
    <meta charset="utf-8">
    <title></title>
  </head>
  <body>
    <script type="module">
      import * as say from "./modules/export_test.js";

      say.bye2("tt");
    </script>
  </body>
</html>
```



## 範例 6：export default

一個模組檔，**最多只能出現一次** **`export default`**。且可不用加上名稱，以函式為例：

```javascript
export default function(user){
  alert("哈囉: " + user);
}

export function bye(user){
  alert("掰: " + user);
}
```

上面的這段，也可改寫成：

```javascript
function hi(user){
  alert("哈囉: " + user);
}

function bye(user){
  alert("掰: " + user);
}

export {hi as default, bye};
```



而且在匯入時，export default 的部份，**不用加上大括號**，或者使用 **default** 關鍵字，例：

```html
<!DOCTYPE html>
<html lang="zh-Hant">
  <head>
    <meta charset="utf-8">
    <title></title>
  </head>
  <body>
    <script type="module">
      // 這裡的 hi，就是使用 export default 匯出的函式
      import hi, {bye} from "./modules/export_test.js";
      // 上面這行，可改寫成以下：
      // import {default as hi, bye} from "./modules/export_test.js";
      

      hi("John");
      bye("John");
    </script>
  </body>
</html>
```



或者，在匯入時，寫以下語法，也就是將匯出的東西，都放到 say 物件當中，那麼 say.default 就會是 export default 的部份：

```html
<!DOCTYPE html>
<html lang="zh-Hant">
  <head>
    <meta charset="utf-8">
    <title></title>
  </head>
  <body>
    <script type="module">
      import * as say from "./modules/export_test.js";

      say.default("John"); // 這個等同於是執行 hi() 函式
      say.bye("John");
    </script>
  </body>
</html>

```



## 範例 7：模組再匯出

`modules/module2.js`，內容如下：

```javascript
export function hi(user){
  alert("哈囉: " + user);
}
```

`modules/module1.js`，內容如下：

```javascript
export {hi} from "./module2.js";
```

`module_test6.html`，內容如下：

```html
<!DOCTYPE html>
<html lang="zh-Hant">
  <head>
    <meta charset="utf-8">
    <title></title>
  </head>
  <body>

    <script type="module">
      import {hi} from "./modules/module1.js";
      hi("John");
    </script>
  </body>
</html>
```



## 範例 8：預設的模組再匯出

預設的模組指的是使用 **`export default`**。



延續上例的範例 7，將 `modules/module2.js` 改成：

```javascript
export default function hi(user){
  alert("哈囉: " + user);
}
```

`modules/module1.js` 改成：

```javascript
export {default as hi} from "./module2.js";
```

`module_test6.html`，內容不變，一樣可以運作。



## 範例 9

另外如果使用以下語法：

```javascript
export * from './user.js'; // 這會匯出 export, (不含 export default)
export {default} from './user.js'; // 這會匯出 export default
```



沿續上例的範例 8，將 `modules/module2.js` 改成：

```javascript
export default function hi(user){
  alert("哈囉: " + user);
}
export function bye(user){
  alert("掰: " + user);
}
```

`modules/module1.js` 改成：

```javascript
export * from "./module2.js";
export {default} from "./module2.js";
```

`module_test6.html`，內容改成如下：

```html
<!DOCTYPE html>
<html lang="zh-Hant">
  <head>
    <meta charset="utf-8">
    <title></title>
  </head>
  <body>

    <script type="module">
      import {default as hi, bye} from "./modules/module1.js";
      
      hi("John");
      bye("John");
    </script>
  </body>
</html>

```



## 參考資料

[https://javascript.info/import-export](https://javascript.info/import-export)





